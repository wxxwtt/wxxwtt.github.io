webpackJsonp([13],{JKiR:function(t,a){},UZ0P:function(t,a,e){"use strict";e.d(a,"c",function(){return c}),e.d(a,"b",function(){return u}),e.d(a,"a",function(){return d}),e.d(a,"d",function(){return v});var s=e("woOf"),n=e.n(s),r=e("vLgD"),o=e("mw3O"),i=e.n(o),l=e("Dod7"),c=function(t){return Object(r.a)({method:"POST",url:l.a,data:i.a.stringify(n()(Object(l.c)(),t))})},u=function(t){return Object(r.a)({method:"POST",url:l.a,data:i.a.stringify(n()(Object(l.c)(),t))})},d=function(t){return Object(r.a)({method:"POST",url:l.a,data:i.a.stringify(n()(Object(l.c)(),t))})},v=function(t){return Object(r.a)({method:"POST",url:l.a,data:i.a.stringify(n()(Object(l.c)(),t))})}},jy0x:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s,n=e("Xxa5"),r=e.n(n),o=e("exGp"),i=e.n(o),l=e("bOdI"),c=e.n(l),u=(e("nsZj"),e("02pT"),e("T2s0"),e("1H7Z"),e("hW8u"),e("WpgC"),e("3IMD"),e("JKiR"),e("RfZZ")),d=e("7+uW"),v=e("o69Z"),p=e("V+2B"),_=e("CsZI"),m=e("SSsa"),f=Object(v.b)("dialog"),b=f[0],C=f[1],h=f[2],g=b({mixins:[Object(_.a)()],props:{title:String,width:[Number,String],message:String,className:null,callback:Function,beforeClose:Function,messageAlign:String,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showCancelButton:Boolean,transition:{type:String,default:"van-dialog-bounce"},showConfirmButton:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{onClickOverlay:function(){this.handleAction("overlay")},handleAction:function(t){var a=this;this.$emit(t),this.value&&(this.beforeClose?(this.loading[t]=!0,this.beforeClose(t,function(e){!1!==e&&a.loading[t]&&a.onClose(t),a.loading.confirm=!1,a.loading.cancel=!1})):this.onClose(t))},onClose:function(t){this.close(),this.callback&&this.callback(t)},onOpened:function(){this.$emit("opened")},onClosed:function(){this.$emit("closed")}},render:function(){var t,a,e=this,s=arguments[0];if(this.shouldRender){var n=this.message,r=this.messageAlign,o=this.slots(),i=this.slots("title")||this.title,l=i&&s("div",{class:C("header",{isolated:!n&&!o})},[i]),c=(o||n)&&s("div",{class:C("content")},[o||s("div",{domProps:{innerHTML:n},class:C("message",(t={"has-title":i},t[r]=r,t))})]),u=this.showCancelButton&&this.showConfirmButton,d=s("div",{class:[p.f,C("footer",{buttons:u})]},[this.showCancelButton&&s(m.a,{attrs:{size:"large",loading:this.loading.cancel,text:this.cancelButtonText||h("cancel")},class:C("cancel"),style:{color:this.cancelButtonColor},on:{click:function(){e.handleAction("cancel")}}}),this.showConfirmButton&&s(m.a,{attrs:{size:"large",loading:this.loading.confirm,text:this.confirmButtonText||h("confirm")},class:[C("confirm"),(a={},a[p.d]=u,a)],style:{color:this.confirmButtonColor},on:{click:function(){e.handleAction("confirm")}}})]);return s("transition",{attrs:{name:this.transition},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[s("div",{directives:[{name:"show",value:this.value}],attrs:{role:"dialog","aria-labelledby":this.title||n},class:[C(),this.className],style:{width:Object(v.a)(this.width)}},[l,c,d])])}}});function y(t){return v.f?Promise.resolve():new Promise(function(a,e){var n;s&&(n=s.$el,document.body.contains(n))||(s&&s.$destroy(),(s=new(d.a.extend(g))({el:document.createElement("div"),propsData:{lazyRender:!1}})).$on("input",function(t){s.value=t})),Object(u.a)(s,y.currentOptions,t,{resolve:a,reject:e})})}y.defaultOptions={value:!0,title:"",width:"",message:"",overlay:!0,className:"",lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:null,messageAlign:"",getContainer:"body",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!1,closeOnClickOverlay:!1,callback:function(t){s["confirm"===t?"resolve":"reject"](t)}},y.alert=y,y.confirm=function(t){return y(Object(u.a)({showCancelButton:!0},t))},y.close=function(){s&&(s.value=!1)},y.setDefaultOptions=function(t){Object(u.a)(y.currentOptions,t)},y.resetDefaultOptions=function(){y.currentOptions=Object(u.a)({},y.defaultOptions)},y.resetDefaultOptions(),y.install=function(){d.a.use(g)},y.Component=g,d.a.prototype.$dialog=y;var D,O=y,k=(e("MY4N"),e("0zAV")),j=(e("3Lne"),e("JRZP"),e("LK01")),w=(e("ZuV/"),e("37Xn")),x=(e("uCzd"),e("t8KH")),B=(e("+GXX"),e("fTPy")),S=(e("i0mo"),e("Hkar")),$=(e("OWWB"),e("1fWZ")),T=e("S5HZ"),P=e("3pgD"),H=e("UZ0P"),Z=e("Dod7"),A={name:"",data:function(){return{type:1,dialog:!1,reject_dialog:!1,reason:"",orderData:{}}},components:(D={OrderDetailHead:T.a,JySteps:P.a},c()(D,$.a.name,$.a),c()(D,S.a.name,S.a),c()(D,B.a.name,B.a),c()(D,x.a.name,x.a),c()(D,w.a.name,w.a),c()(D,j.a.name,j.a),c()(D,m.a.name,m.a),c()(D,k.a.name,k.a),c()(D,O.Component.name,O.Component),D),created:function(){this.setType(),this._getOrderDetail()},methods:{setType:function(){var t=this.$route.query.type;this.type=t},confirm:function(){var t=this;return i()(r.a.mark(function a(){var e,s,n,o,i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,Object(Z.b)("正在提交"),e=t.$route.params.id,s=t.$route.query.type,n=t.orderData.products,o={flag:"approval_agree",id:e,products:n},2==s&&delete o.products,a.next=9,Object(H.a)(o);case 9:i=a.sent,"SUCC"===i.data.recode&&(t.$toast.success("操作成功"),setTimeout(function(){t.$router.back()},1e3)),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),console.log(a.t0);case 17:case"end":return a.stop()}},a,t,[[0,14]])}))()},_reject:function(){var t=this;return i()(r.a.mark(function a(){var e,s,n,o;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,(e=t.reason).length){a.next=4;break}return a.abrupt("return",t.$toast("请输入拒绝理由"));case 4:return Object(Z.b)("正在提交"),s=t.$route.params.id,n={flag:"approval_reject",id:s,reason:e},a.next=9,Object(H.d)(n);case 9:o=a.sent,"SUCC"===o.data.recode&&(t.$toast.success("操作成功"),setTimeout(function(){t.$router.back()},1e3)),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),console.log(a.t0);case 17:case"end":return a.stop()}},a,t,[[0,14]])}))()},handleAgree:function(){this.dialog=!0},handleReject:function(){this.reject_dialog=!0},_getOrderDetail:function(){var t=this;return i()(r.a.mark(function a(){var e,s,n,o;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,Object(Z.b)(),e=t.$route.params.id,s={flag:"approval_detail",id:e},a.next=6,Object(H.b)(s);case 6:n=a.sent,"SUCC"===(o=n.data).recode&&(t.orderData=o.data),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0);case 14:case"end":return a.stop()}},a,t,[[0,11]])}))()},minusHandle:function(t){var a=this.orderData.products.find(function(a){return a.product_id==t});0==a.approval_number?a.approval_number=0:a.approval_number--},addHandle:function(t){this.orderData.products.find(function(a){return a.product_id==t}).approval_number++}}},z={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"detail"},[e("div",{staticClass:"scroll"},[1==t.type?e("order-detail-head",[e("div",{staticClass:"order-info"},[e("p",[e("span",[t._v("订单状态：")]),t._v(" "),1==t.orderData.status?e("span",{staticClass:"status"},[t._v("待处理")]):t._e(),t._v(" "),2==t.orderData.status?e("span",{staticClass:"status"},[t._v("已同意")]):t._e(),t._v(" "),3==t.orderData.status?e("span",{staticClass:"status"},[t._v("已拒绝")]):t._e(),t._v(" "),4==t.orderData.status?e("span",{staticClass:"status"},[t._v("抄送我")]):t._e()]),t._v(" "),e("p",[e("span",[t._v("订单编号：")]),t._v(" "),e("span",[t._v(t._s(t.orderData.number))])]),t._v(" "),e("p",[e("span",[t._v("采购时间：")]),t._v(" "),e("span",[t._v(t._s(t.orderData.datetime))])]),t._v(" "),e("p",[e("span",[t._v("采购人员：")]),t._v(" "),e("span",[t._v(t._s(t.orderData.username))])]),t._v(" "),e("p",[e("span",[t._v("采购门店：")]),t._v(" "),e("span",[t._v(t._s(t.orderData.store))])])])]):t._e(),t._v(" "),2==t.type?e("order-detail-head",[e("div",{staticClass:"order-info"},[e("p",[e("span",[t._v("订单状态：")]),t._v(" "),1==t.orderData.status?e("span",{staticClass:"status"},[t._v("待处理")]):t._e(),t._v(" "),2==t.orderData.status?e("span",{staticClass:"status"},[t._v("已同意")]):t._e(),t._v(" "),3==t.orderData.status?e("span",{staticClass:"status"},[t._v("已拒绝")]):t._e(),t._v(" "),4==t.orderData.status?e("span",{staticClass:"status"},[t._v("抄送我")]):t._e()]),t._v(" "),e("p",[e("span",[t._v("订单编号：")]),t._v(" "),e("span",[t._v(t._s(t.orderData.number))])]),t._v(" "),e("p",[e("span",[t._v("盘点时间：")]),t._v(" "),e("span",[t._v(t._s(t.orderData.datetime))])]),t._v(" "),e("p",[e("span",[t._v("盘点人员：")]),t._v(" "),e("span",[t._v(t._s(t.orderData.username))])]),t._v(" "),e("p",[e("span",[t._v("盘点门店：")]),t._v(" "),e("span",[t._v(t._s(t.orderData.store))])])])]):t._e(),t._v(" "),3==t.type?e("order-detail-head",[e("div",{staticClass:"order-info"},[e("p",[e("span",[t._v("订单状态：")]),t._v(" "),1==t.orderData.status?e("span",{staticClass:"status"},[t._v("待处理")]):t._e(),t._v(" "),2==t.orderData.status?e("span",{staticClass:"status"},[t._v("已同意")]):t._e(),t._v(" "),3==t.orderData.status?e("span",{staticClass:"status"},[t._v("已拒绝")]):t._e(),t._v(" "),4==t.orderData.status?e("span",{staticClass:"status"},[t._v("抄送我")]):t._e()]),t._v(" "),e("p",[e("span",[t._v("订单编号：")]),t._v(" "),e("span",[t._v(t._s(t.orderData.number))])]),t._v(" "),e("p",[e("span",[t._v("退货时间：")]),t._v(" "),e("span",[t._v(t._s(t.orderData.datetime))])]),t._v(" "),e("p",[e("span",[t._v("退货人员：")]),t._v(" "),e("span",[t._v(t._s(t.orderData.username))])]),t._v(" "),e("p",[e("span",[t._v("退货门店：")]),t._v(" "),e("span",[t._v(t._s(t.orderData.store))])])])]):t._e(),t._v(" "),1==t.type?e("div",{staticClass:"product"},[e("van-cell-group",[e("van-cell",{attrs:{title:"采购产品 : "}})],1),t._v(" "),e("ul",{staticClass:"product-list"},t._l(t.orderData.products,function(a){return e("li",{key:a.id,staticClass:"border-bottom"},[e("p",[e("span",{staticClass:"brand"},[t._v("【"+t._s(a.brand)+"】"+t._s(a.line))]),t._v(" "),e("span",{staticClass:"model"},[t._v(t._s(a.model))])]),t._v(" "),e("p",[t._v("条形码："+t._s(a.bar_code))]),t._v(" "),e("p",{staticClass:"number"},[e("span",[t._v("采购数量："+t._s(a.number))])]),t._v(" "),e("p",{staticClass:"purchase"},[e("span",{staticClass:"title"},[t._v("审批数量：")]),t._v(" "),e("span",{staticClass:"input"},[e("i",{staticClass:"iconfont icon-minus",on:{click:function(e){return t.minusHandle(a.id)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:a.approval_number,expression:"item.approval_number"}],staticClass:"number",attrs:{type:"number",placeholder:"0",pattern:"[0-9]*"},domProps:{value:a.approval_number},on:{input:function(e){e.target.composing||t.$set(a,"approval_number",e.target.value)}}}),t._v(" "),e("i",{staticClass:"iconfont icon-plus",on:{click:function(e){return t.addHandle(a.id)}}})])])])}),0),t._v(" "),e("van-cell-group",[e("van-cell",{staticClass:"border-top count"},[e("template",{slot:"title"},[e("p",[t._v("合计采购数量："+t._s(t.orderData.total_num))])])],2)],1)],1):t._e(),t._v(" "),2==t.type?e("div",{staticClass:"product"},[e("van-cell-group",[e("van-cell",{attrs:{title:"盘点产品 : "}})],1),t._v(" "),e("ul",{staticClass:"product-list"},t._l(t.orderData.check_products,function(a,s){return e("li",{key:s,staticClass:"border-bottom"},[e("p",[e("span",{staticClass:"brand"},[t._v("【"+t._s(a.brand)+"】"+t._s(a.line))]),t._v(" "),e("span",{staticClass:"model"},[t._v(t._s(a.model))])]),t._v(" "),e("p",[t._v("条形码："+t._s(a.bar_code))]),t._v(" "),e("div",{staticClass:"number"},[e("p",[t._v("系统库存："+t._s(a.system_stock))]),t._v(" "),e("p",[t._v("盘点库存："+t._s(a.check_stock))]),t._v(" "),e("p",[t._v("\n                差异：\n                "),e("span",{staticClass:"diff"},[t._v(t._s(a.difference))])])])])}),0),t._v(" "),e("van-cell-group",[e("van-cell",{staticClass:"count"},[e("template",{slot:"title"},[e("p",[t._v("合计采购数量："+t._s(t.orderData.total_num))])])],2)],1)],1):t._e(),t._v(" "),3==t.type?e("div",{staticClass:"product"},[e("van-cell-group",[e("van-cell",{attrs:{title:"退货产品 : "}})],1),t._v(" "),e("ul",{staticClass:"product-list"},t._l(t.orderData.products,function(a){return e("li",{key:a.id,staticClass:"border-bottom"},[e("p",[e("span",{staticClass:"brand"},[t._v("【"+t._s(a.brand)+"】"+t._s(a.line))]),t._v(" "),e("span",{staticClass:"model"},[t._v(t._s(a.model))])]),t._v(" "),e("p",[t._v("条形码："+t._s(a.bar_code))]),t._v(" "),e("p",{staticClass:"number"},[e("span",[t._v("退货数量："+t._s(a.number))])]),t._v(" "),e("p",{staticClass:"purchase"},[e("span",{staticClass:"title"},[t._v("审批数量：")]),t._v(" "),e("span",{staticClass:"input"},[e("i",{staticClass:"iconfont icon-minus",on:{click:function(e){return t.minusHandle(a.id)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:a.approval_number,expression:"item.approval_number"}],staticClass:"number",attrs:{type:"number",placeholder:"0",pattern:"[0-9]*"},domProps:{value:a.approval_number},on:{input:function(e){e.target.composing||t.$set(a,"approval_number",e.target.value)}}}),t._v(" "),e("i",{staticClass:"iconfont icon-plus",on:{click:function(e){return t.addHandle(a.id)}}})])])])}),0),t._v(" "),e("van-cell-group",[e("van-cell",{staticClass:"border-top count"},[e("template",{slot:"title"},[e("p",[t._v("合计退货数量：470")])])],2)],1)],1):t._e(),t._v(" "),e("van-cell-group",{staticClass:"remark"},[e("van-cell",[e("template",{slot:"title"},[1==t.type?e("div",[t._v("备注信息："+t._s(t.orderData.remark||"无"))]):t._e(),t._v(" "),2==t.type?e("div",[t._v("差异原因："+t._s(t.orderData.remark||"无"))]):t._e(),t._v(" "),3==t.type?e("div",[t._v("退货原因："+t._s(t.orderData.remark||"无"))]):t._e()])],2)],1),t._v(" "),e("div",{staticClass:"approval"},[e("jy-steps",{attrs:{steps:t.orderData.approval_process}})],1)],1)]),t._v(" "),e("div",{staticClass:"footer fixed-bottom"},[e("van-row",{},[e("van-col",{attrs:{span:"8"}},[e("van-button",{staticClass:"btn back",attrs:{type:"default",hairline:"",size:"large"},on:{click:function(a){return t.$router.go(-1)}}},[t._v("返回")])],1),t._v(" "),e("van-col",{attrs:{span:"8"}},[e("van-button",{staticClass:"btn reject",attrs:{type:"default",hairline:"",size:"large"},on:{click:t.handleReject}},[t._v("拒绝")])],1),t._v(" "),e("van-col",{attrs:{span:"8"}},[e("van-button",{staticClass:"btn agree",attrs:{type:"default",hairline:"",size:"large"},on:{click:t.handleAgree}},[t._v("同意")])],1)],1)],1),t._v(" "),e("van-dialog",{attrs:{title:"提示","show-cancel-button":""},on:{confirm:t.confirm},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[1==t.type?e("p",{staticClass:"dialog-title"},[t._v("您确定同意此采购申请吗？")]):t._e(),t._v(" "),2==t.type?e("p",{staticClass:"dialog-title"},[t._v("您确定同意此盘点申请吗？")]):t._e(),t._v(" "),3==t.type?e("p",{staticClass:"dialog-title"},[t._v("您确定同意此退货申请吗？")]):t._e()]),t._v(" "),e("van-dialog",{attrs:{title:"提示","show-cancel-button":""},on:{confirm:t._reject},model:{value:t.reject_dialog,callback:function(a){t.reject_dialog=a},expression:"reject_dialog"}},[1==t.type?e("p",{staticClass:"dialog-title"},[t._v("您确定拒绝此采购申请吗？")]):t._e(),t._v(" "),2==t.type?e("p",{staticClass:"dialog-title"},[t._v("您确定拒绝此盘点申请吗？")]):t._e(),t._v(" "),3==t.type?e("p",{staticClass:"dialog-title"},[t._v("您确定拒绝此退货申请吗？")]):t._e(),t._v(" "),e("van-field",{staticClass:"reason border",attrs:{rows:"3",autosize:"",border:!0,type:"textarea",placeholder:"请输入拒绝理由"},model:{value:t.reason,callback:function(a){t.reason=a},expression:"reason"}})],1)],1)},staticRenderFns:[]};var R=e("VU/8")(A,z,!1,function(t){e("tl5e")},"data-v-d79e8660",null);a.default=R.exports},tl5e:function(t,a){}});