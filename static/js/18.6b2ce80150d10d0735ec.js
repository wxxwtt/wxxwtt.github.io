webpackJsonp([18],{"1vvo":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n=a("bOdI"),r=a.n(n),i=(a("3Lne"),a("SSsa")),l=a("QstE"),o=a("cMj/"),u=a("oqQY"),d=a.n(u),c=a("Xxa5"),v=a.n(c),h=a("Gu7T"),p=a.n(h),f=a("exGp"),m=a.n(f),_=(a("OWWB"),a("1fWZ")),g=(a("9++/"),a("QhyB")),S=a("cdZ3"),Y=a("Dod7"),O=a("FWz8"),x={name:"orderlist",data:function(){return{list:[],loading:!1,finished:!1,page:1,pagesize:10}},props:{searchValue:{default:""},orderStatus:{default:""},timeInterval:{type:Array,default:[d()().subtract(29,"day").format("YYYY-MM-DD"),d()().format("YYYY-MM-DD")]}},watch:{searchValue:function(t,e){this.page=1,this.list=[],this._getOrder()},orderStatus:function(t,e){this.page=1,this.list=[],this._getOrder()},timeInterval:function(t,e){this.page=1,this.list=[],this._getOrder()}},components:(s={OrderList:S.a},r()(s,g.a.name,g.a),r()(s,_.a.name,_.a),s),methods:{_getOrder:function(){var t=this;return m()(v.a.mark(function e(){var a,s,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(Y.b)(),a={flag:"order",search:t.searchValue,status:t.orderStatus,page:t.page,pagesize:t.pagesize,start_time:t.timeInterval[0],end_time:t.timeInterval[1]},e.next=5,Object(O.b)(a);case 5:s=e.sent,"SUCC"===(n=s.data).recode&&(t.page++,(r=t.list).push.apply(r,p()(n.data))),t.loading=!1,n.data.length||(t.finished=!0),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),t.loading=!1,t.finished=!0,console.log(e.t0);case 17:case"end":return e.stop()}},e,t,[[0,12]])}))()},goDetail:function(t){this.$router.push({name:"orderdetail",params:{id:t}})}},destroyed:function(){window.removeEventListener("scroll",this._getOrder)}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("order-list",[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t._getOrder},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e){return a("van-cell",{key:e.id,on:{click:function(a){return t.goDetail(e.id)}}},[a("p",{staticClass:"date"},[t._v(t._s(e.datetime))]),t._v(" "),a("div",{staticClass:"order-list"},[a("van-cell",{attrs:{"is-link":"",center:""}},[a("div",{staticClass:"order-item"},[a("p",{staticClass:"order-number"},[a("span",{staticClass:"title"},[t._v("订单编号:")]),t._v("\n                "+t._s(e.number)+"\n                "),1==e.status?a("span",{staticClass:"state"},[t._v("审核中")]):t._e(),t._v(" "),2==e.status?a("span",{staticClass:"state state-reject"},[t._v("被拒绝")]):t._e(),t._v(" "),3==e.status?a("span",{staticClass:"state state-agree"},[t._v("已同意")]):t._e()]),t._v(" "),a("p",[a("span",{staticClass:"title"},[t._v("采购门店:")]),t._v("\n                "+t._s(e.store)+"\n              ")]),t._v(" "),a("p",{staticClass:"product"},[a("span",{staticClass:"title"},[t._v("采购产品:")]),t._v("\n                "+t._s(e.product)+"\n              ")])])])],1)])}),1)],1)],1)},staticRenderFns:[]};var b,y=a("VU/8")(x,C,!1,function(t){a("2q+X")},"data-v-7fd4950f",null).exports,D={name:"order",data:function(){return{searchValue:"",defaultStatus:{text:"状态",value:""},timeInterval:[d()().subtract(29,"day").format("YYYY-MM-DD"),d()().format("YYYY-MM-DD")],timeOptions:[{text:"近30天",value:0},{text:"近7天",value:1},{text:"自定义",value:2}],statusOptions:[{text:"审批中",value:1},{text:"被拒绝",value:2},{text:"已同意",value:3}]}},created:function(){},methods:{handleSearch:function(t){this.searchValue=t},handleTimeInterval:function(t){this.timeInterval=t},handleStatus:function(t){this.defaultStatus=t}},components:(b={Search:l.a,JyDropDownMenu:o.a},r()(b,i.a.name,i.a),r()(b,"List",y),b)},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("search",{on:{handleSearch:t.handleSearch}}),t._v(" "),a("jy-drop-down-menu",{attrs:{statusOptions:t.statusOptions,timeOptions:t.timeOptions,defaultStatus:t.defaultStatus},on:{handleTimeInterval:t.handleTimeInterval,handleStatus:t.handleStatus}}),t._v(" "),a("list",{attrs:{searchValue:t.searchValue,orderStatus:t.defaultStatus.value,timeInterval:t.timeInterval}}),t._v(" "),a("router-link",{attrs:{to:{name:"neworder",query:{type:1}}}},[a("van-button",{staticClass:"neworder",attrs:{type:"default",size:"large",hairline:!0}},[t._v("+ 新增")])],1)],1)},staticRenderFns:[]};var M=a("VU/8")(D,I,!1,function(t){a("YN9E")},"data-v-1cd06506",null);e.default=M.exports},"2q+X":function(t,e){},YN9E:function(t,e){}});