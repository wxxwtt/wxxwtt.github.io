webpackJsonp([21],{"4JxW":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("bOdI"),s=n.n(i),o=(n("3Lne"),n("SSsa")),a=(n("jti4"),n("uk7J")),r=(n("i0mo"),n("Hkar")),u=(n("MY4N"),n("0zAV")),l=(n("OWWB"),n("1fWZ")),c=(n("nsZj"),n("02pT"),n("T2s0"),n("1H7Z"),n("hW8u"),n("qYlo")),h=(n("WpgC"),n("5Hoj"),n("RfZZ")),m=n("o69Z"),f=n("RP/J"),d=n("54/E");function p(t){return Array.isArray(t)?t.map(function(t){return p(t)}):"object"==typeof t?Object(d.a)({},t):t}var v={title:String,loading:Boolean,showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,allowHtml:{type:Boolean,default:!0},visibleItemCount:{type:Number,default:5},itemHeight:{type:Number,default:44},swipeDuration:{type:Number,default:1e3}},g=n("V+2B"),b=n("pIDD"),x=n("AA6R"),I=n.n(x),y=n("joY4"),C=n("vwLT"),w=Object(m.b)("picker-column"),O=w[0],T=w[1];function k(t){return Object(m.e)(t)&&t.disabled}var H,V=O({mixins:[C.a],props:{valueKey:String,allowHtml:Boolean,className:String,itemHeight:Number,defaultIndex:Number,swipeDuration:Number,visibleItemCount:Number,initialOptions:{type:Array,default:function(){return[]}}},data:function(){return{offset:0,duration:0,options:p(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},mounted:function(){this.bindTouchEvent(this.$el)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1)},watch:{defaultIndex:function(){this.setIndex(this.defaultIndex)}},computed:{count:function(){return this.options.length},baseOffset:function(){return this.itemHeight*(this.visibleItemCount-1)/2}},methods:{onTouchStart:function(t){if(this.touchStart(t),this.moving){var e=function(t){var e=window.getComputedStyle(t),n=e.transform||e.webkitTransform,i=n.slice(7,n.length-1).split(", ")[5];return Number(i)}(this.$refs.wrapper);this.offset=Math.min(0,e-this.baseOffset),this.startOffset=this.offset}else this.startOffset=this.offset;this.duration=0,this.transitionEndTrigger=null,this.touchStartTime=Date.now(),this.momentumOffset=this.startOffset},onTouchMove:function(t){this.moving=!0,this.touchMove(t),"vertical"===this.direction&&Object(f.c)(t,!0),this.offset=Object(y.a)(this.startOffset+this.deltaY,-this.count*this.itemHeight,this.itemHeight);var e=Date.now();e-this.touchStartTime>300&&(this.touchStartTime=e,this.momentumOffset=this.offset)},onTouchEnd:function(){var t=this,e=this.offset-this.momentumOffset,n=Date.now()-this.touchStartTime;if(n<300&&Math.abs(e)>15)this.momentum(e,n);else{var i=this.getIndexByOffset(this.offset);this.duration=200,this.setIndex(i,!0),setTimeout(function(){t.moving=!1},0)}},onTransitionEnd:function(){this.stopMomentum()},onClickItem:function(t){this.moving||(this.duration=200,this.setIndex(t,!0))},adjustIndex:function(t){for(var e=t=Object(y.a)(t,0,this.count);e<this.count;e++)if(!k(this.options[e]))return e;for(var n=t-1;n>=0;n--)if(!k(this.options[n]))return n},getOptionText:function(t){return Object(m.e)(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,e){var n=this;t=this.adjustIndex(t)||0,this.offset=-t*this.itemHeight;var i=function(){t!==n.currentIndex&&(n.currentIndex=t,e&&n.$emit("change",t))};this.moving?this.transitionEndTrigger=i:i()},setValue:function(t){for(var e=this.options,n=0;n<e.length;n++)if(this.getOptionText(e[n])===t)return this.setIndex(n)},getValue:function(){return this.options[this.currentIndex]},getIndexByOffset:function(t){return Object(y.a)(Math.round(-t/this.itemHeight),0,this.count-1)},momentum:function(t,e){var n=Math.abs(t/e);t=this.offset+n/.002*(t<0?-1:1);var i=this.getIndexByOffset(t);this.duration=this.swipeDuration,this.setIndex(i,!0)},stopMomentum:function(){this.moving=!1,this.duration=0,this.transitionEndTrigger&&(this.transitionEndTrigger(),this.transitionEndTrigger=null)},genOptions:function(){var t=this,e=this.$createElement,n={height:this.itemHeight+"px"};return this.options.map(function(i,s){var o=t.getOptionText(i),a=k(i),r={style:n,attrs:{role:"button",tabindex:a?-1:0},class:["van-ellipsis",T("item",{disabled:a,selected:s===t.currentIndex})],on:{click:function(){t.onClickItem(s)}}};return t.allowHtml&&(r.domProps={innerHTML:o}),e("li",I()([{},r]),[t.allowHtml?"":o])})}},render:function(){var t=arguments[0],e={transform:"translate3d(0, "+(this.offset+this.baseOffset)+"px, 0)",transitionDuration:this.duration+"ms",transitionProperty:this.duration?"all":"none",lineHeight:this.itemHeight+"px"};return t("div",{class:[T(),this.className]},[t("ul",{ref:"wrapper",style:e,class:T("wrapper"),on:{transitionend:this.onTransitionEnd}},[this.genOptions()])])}}),j=Object(m.b)("picker"),E=j[0],S=j[1],N=j[2],$=E({props:Object(h.a)({},v,{defaultIndex:{type:Number,default:0},columns:{type:Array,default:function(){return[]}},toolbarPosition:{type:String,default:"top"},valueKey:{type:String,default:"text"}}),data:function(){return{children:[]}},computed:{simple:function(){return this.columns.length&&!this.columns[0].values}},watch:{columns:"setColumns"},methods:{setColumns:function(){var t=this;(this.simple?[{values:this.columns}]:this.columns).forEach(function(e,n){t.setColumnValues(n,p(e.values))})},emit:function(t){this.simple?this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit(t,this.getValues(),this.getIndexes())},onChange:function(t){this.simple?this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit("change",this,this.getValues(),t)},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var e=this.getColumn(t);return e&&e.getValue()},setColumnValue:function(t,e){var n=this.getColumn(t);n&&n.setValue(e)},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var n=this.getColumn(t);n&&n.setIndex(e)},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){var n=this.children[t];n&&JSON.stringify(n.options)!==JSON.stringify(e)&&(n.options=e,n.setIndex(0))},getValues:function(){return this.children.map(function(t){return t.getValue()})},setValues:function(t){var e=this;t.forEach(function(t,n){e.setColumnValue(n,t)})},getIndexes:function(){return this.children.map(function(t){return t.currentIndex})},setIndexes:function(t){var e=this;t.forEach(function(t,n){e.setColumnIndex(n,t)})},confirm:function(){this.children.forEach(function(t){return t.stopMomentum()}),this.emit("confirm")},cancel:function(){this.emit("cancel")},genTitle:function(){var t=this.$createElement,e=this.slots("title");return e||(this.title?t("div",{class:["van-ellipsis",S("title")]},[this.title]):void 0)},genToolbar:function(){var t=this.$createElement;if(this.showToolbar)return t("div",{class:[g.e,S("toolbar")]},[this.slots()||[t("button",{attrs:{type:"button"},class:S("cancel"),on:{click:this.cancel}},[this.cancelButtonText||N("cancel")]),this.genTitle(),t("button",{attrs:{type:"button"},class:S("confirm"),on:{click:this.confirm}},[this.confirmButtonText||N("confirm")])]])},genColumns:function(){var t=this,e=this.$createElement;return(this.simple?[this.columns]:this.columns).map(function(n,i){return e(V,{attrs:{valueKey:t.valueKey,allowHtml:t.allowHtml,className:n.className,itemHeight:t.itemHeight,defaultIndex:n.defaultIndex||t.defaultIndex,swipeDuration:t.swipeDuration,visibleItemCount:t.visibleItemCount,initialOptions:t.simple?n:n.values},on:{change:function(){t.onChange(i)}}})})}},render:function(t){var e=this.itemHeight,n=e*this.visibleItemCount,i={height:e+"px"},s={height:n+"px"},o={backgroundSize:"100% "+(n-e)/2+"px"};return t("div",{class:S()},["top"===this.toolbarPosition?this.genToolbar():t(),this.loading?t(b.a,{class:S("loading")}):t(),this.slots("columns-top"),t("div",{class:S("columns"),style:s,on:{touchmove:f.c}},[this.genColumns(),t("div",{class:S("mask"),style:o}),t("div",{class:[g.f,S("frame")],style:i})]),this.slots("columns-bottom"),"bottom"===this.toolbarPosition?this.genToolbar():t()])}}),P={name:"",data:function(){return{value:"",showPicker:!1,columns:["杭州","宁波","温州","嘉兴","湖州"],message:"",fileList:[]}},components:(H={},s()(H,$.name,$),s()(H,c.a.name,c.a),s()(H,l.a.name,l.a),s()(H,u.a.name,u.a),s()(H,r.a.name,r.a),s()(H,a.a.name,a.a),s()(H,o.a.name,o.a),H),methods:{onConfirm:function(t){this.value=t,this.showPicker=!1}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"feedback"},[n("div",{staticClass:"feed-type"},[n("van-cell",{attrs:{"is-link":"",required:"",title:"问题类型",value:t.value},on:{click:function(e){t.showPicker=!0}}})],1),t._v(" "),n("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:function(e){t.showPicker=!1},confirm:t.onConfirm}})],1),t._v(" "),n("van-cell-group",[n("van-cell",{attrs:{required:"",title:"问题描述"}}),t._v(" "),n("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",maxlength:"200",placeholder:"请填写问题信息","show-word-limit":""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),t._v(" "),n("van-cell-group",[n("van-cell",[[n("span",{staticClass:"custom-text"},[t._v("图片（0/5）")]),t._v(" "),n("span",[t._v("(点击图片编辑）")])]],2),t._v(" "),n("van-uploader",{attrs:{multiple:"","max-count":5,capture:"camera"},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1),t._v(" "),n("div",{staticClass:"submit"},[n("van-button",{attrs:{type:"primary",block:"",color:"#FF6600"}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var B=n("VU/8")(P,_,!1,function(t){n("bdtV")},"data-v-0374352e",null);e.default=B.exports},"5Hoj":function(t,e){},bdtV:function(t,e){}});